# Planning

先用 [[NDT]] 或者 [[LOAM]] 构建地图，然后规划控制

ROS Solution:
![](figures/overview_tf.png)

global planner
- A*
- Dijstra
- RRT


local planner: **generate velocity commands: cmd_vel**
- base_local_planner
  - 支持 holonomic and non-holonomic robots
- **DWA_local_planner**
- DWB_local_planner
- [~~asr_ftc_local_planner~~](http://wiki.ros.org/asr_ftc_local_planner)
  - 仅适用于差分驱动的机器人
  - 仅有向前走，没有后退机制，需自己修改
  - 理论上其避障机制可以判别机器人身后的障碍物，但实际应用效果一般，可以去掉
- **TEB_local_planner**
  - Timed Elastic Band (TEB) approach
  - 支持全向运动 [[holonomic.md]]
  - [Homotopy](https://en.wikipedia.org/wiki/Homotopy) 相关 [[Topology]]
  - [Planning for holonomic robots](http://wiki.ros.org/teb_local_planner/Tutorials/Planning%20for%20holonomic%20robots)
  - Local **trajectory** deformation/optimization (trajectory: includes temporal information)
  - Instead of generating and applying forces, an objective/cost function is minimized
  - Temporal information is subject to optimization -> time-optimal trajectories (replacement for the internal forces)
  - Temporal information allows incorporation of (kino-)dynamic constraints during optimization (no need for a dedicated path-following controller, the teb_local_planner mimics a predictive controller)
  - Adaptation of the trajectory length based on the temporal discretization (insertion and deletion of discrete trajectory points)
  - Supports differential-drive, car-like and **omnidirectional** robots
  - Explores multiple distinctive topologies for parallel trajectory optimization in order to partially overcome the local minima problem (only in the scope of the local costmap due to limited CPU resources, a global planner is still required).
  - **Path-following mode** (minimize distance to global plan instead of minimizing transition time)
  - Bottleneck: very high computational burden (-> limited local costmap size/resolution resp. robot size).
  - [difference between eband_local_planner and teb_local planner](https://answers.ros.org/question/242067/difference-between-eband_local_planner-and-teb_local-planner/)
- [ ] 7月TODO!!!
  - 案例 teb_local_planner_tutorials/robot_omnidir_in_stage.launch
- **Eband_local_planner**
  - classical Elastic Band approach by Quinlan et al.
  - 支持全向运动
  - Local **path** deformation (path: no timing law) based on internal and external forces
  - Internal forces contract the path (-> leading to the shortest path between start and goal)
  - External forces repel the path from obstacles
  - Implementation based on bubbles that represent discrete path points and free-space.
  - Adaption of the trajectory length w.r.t. bubbles/free-space (insertion and deletion of discrete points)
  - Extension to non-holonomic kinematics (supports differential-drive and omnidirectional robots)
  - Subject to local minima (e.g. left or right path around an obstacle, depends on initial path)

**代价地图** = obstacle_layer (`laser_scan_sensor`) + inflation_layer + static_layer (`/map`)

Footprint: 机器人轮廓的凸包

[[ROS.md]] 提供的导航框架
- [3d_navigation](https://github.com/ros-planning/3d_navigation)
  - > Global and local path planner plugins for ROS **move_base** which move the robot in 2D (x,y,angle) but avoid collisions using full 3D data (robot meshes and environment octomap).
- [**navigation**](http://wiki.ros.org/navigation)
  - > A 2D navigation stack that takes in information from **odometry**, **sensor** streams, and a goal pose and outputs safe **velocity commands** that are sent to a mobile base.
  - 核心软件包
    - move_base
    - gmapping
    - amcl
- [nav2d](http://wiki.ros.org/nav2d)
  - > Meta-Package containing modules for 2D-Navigation
  - 多机建图
  - 自主探索
  - 共享地图


相关 [[CG.md]]
![](figures/inﬂation-decay.png)

[//begin]: # "Autogenerated link references for markdown compatibility"
[NDT]: NDT "NDT"
[LOAM]: LOAM "LOAM"
[Topology]: Topology "Topology"
[//end]: # "Autogenerated link references"
